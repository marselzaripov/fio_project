import{proxy as i,subscribe as w}from"valtio/vanilla";import{Buffer as v}from"buffer";const c=i({selectedChainId:void 0,chains:void 0,standaloneChains:void 0,standaloneUri:void 0}),h={state:c,setChains(e){c.chains=e},setStandaloneChains(e){c.standaloneChains=e},setStandaloneUri(e){c.standaloneUri=e},setSelectedChainId(e){c.selectedChainId=e}},d=i({initialized:!1,ethereumClient:void 0}),S={setEthereumClient(e){!d.initialized&&e&&(d.ethereumClient=e,h.setChains(e.chains),d.initialized=!0)},client(){if(d.ethereumClient)return d.ethereumClient;throw new Error("ClientCtrl has no client set")}};function y(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const p=i({configured:!1,projectId:"",theme:y()?"dark":"light",accentColor:"default",standaloneChains:void 0}),O={state:p,subscribe(e){return w(p,()=>e(p))},setConfig(e){var t;if(!e.projectId)throw new Error("Web3Modal requires projectId that can be obtained at cloud.walletconnect.com");(t=e.standaloneChains)!=null&&t.length&&h.setStandaloneChains(e.standaloneChains),Object.assign(p,e),p.configured=!0}};function W(e){const t=Object.fromEntries(Object.entries(e).filter(([o,n])=>typeof n<"u"&&n!==null&&n!=="").map(([o,n])=>[o,n.toString()]));return new URLSearchParams(t).toString()}function j(){return{url:"https://explorer-api.walletconnect.com",projectId:O.state.projectId}}async function C(e){const{url:t,projectId:o}=j(),n=`${t}/v3/wallets?projectId=${o}&${W(e)}`;return(await fetch(n)).json()}const a=i({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},previewWallets:[],recomendedWallets:[]}),P={state:a,subscribe(e){return w(a,()=>e(a))},async getPreviewWallets(e){const{listings:t}=await C(e);return a.previewWallets=Object.values(t),a.previewWallets},async getRecomendedWallets(){const{listings:e}=await C({page:1,entries:6});a.recomendedWallets=Object.values(e)},async getPaginatedWallets(e){const{page:t,search:o}=e,{listings:n,total:l}=await C(e),g=Object.values(n),f=o?"search":"wallets";return a[f]={listings:[...a[f].listings,...g],total:l,page:t??1},{listings:g,total:l}},resetSearch(){a.search={listings:[],total:0,page:1}}},s=i({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),m={state:s,subscribe(e){return w(s,()=>e(s))},push(e,t){e!==s.view&&(s.view=e,t&&(s.data=t),s.history.push(e))},replace(e){s.view=e,s.history=[e]},goBack(){if(s.history.length>1){s.history.pop();const[e]=s.history.slice(-1);s.view=e}}},u=i({open:!1}),L={state:u,subscribe(e){return w(u,()=>e(u))},open(e){var t;const{chains:o}=h.state;o!=null&&o.length&&o.length>1?m.replace("SelectNetwork"):m.replace("ConnectWallet"),typeof e?.uri=="string"&&h.setStandaloneUri(e.uri),(t=e?.standaloneChains)!=null&&t.length&&h.setStandaloneChains(e.standaloneChains),u.open=!0},close(){u.open=!1}},r=i({open:!1,message:"",variant:"success"}),N={state:r,subscribe(e){return w(r,()=>e(r))},openToast(e,t){r.open=!0,r.message=e,r.variant=t},closeToast(){r.open=!1}},b="WALLETCONNECT_DEEPLINK_CHOICE",$={isCoinbaseExtension(){return window.coinbaseWalletExtension},isMobile(){return Boolean(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent))},isEmptyObject(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.getOwnPropertyNames(e).length===0&&Object.getOwnPropertySymbols(e).length===0},formatNativeUrl(e,t,o){const n=e.replaceAll("/","").replaceAll(":","");this.setWalletConnectDeepLink(n,o);const l=encodeURIComponent(t);return`${n}://wc?uri=${l}`},formatUniversalUrl(e,t,o){let n=e;e.endsWith("/")&&(n=e.slice(0,-1)),this.setWalletConnectDeepLink(n,o);const l=encodeURIComponent(t);return`${n}/wc?uri=${l}`},async wait(e){return new Promise(t=>{setTimeout(t,e)})},openHref(e,t="_self"){window.open(e,t,"noreferrer noopener")},setWalletConnectDeepLink(e,t){localStorage.setItem(b,JSON.stringify({href:e,name:t}))},removeWalletConnectDeepLink(){localStorage.removeItem(b)},isNull(e){return e===null}};typeof window<"u"&&(window.Buffer||(window.Buffer=v),window.global||(window.global=window),window.process||(window.process={env:{}}));export{S as ClientCtrl,O as ConfigCtrl,$ as CoreHelpers,P as ExplorerCtrl,L as ModalCtrl,h as OptionsCtrl,m as RouterCtrl,N as ToastCtrl,j as getExplorerApi};
//# sourceMappingURL=index.js.map
